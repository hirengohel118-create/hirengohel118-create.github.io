
<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Follow-ups - Vamika CRM</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="drawer" id="drawer">
    <div class="item" onclick="navigate('leads.html')">Leads</div>
    <div class="item" onclick="navigate('projects.html')">Projects</div>
    <div class="item" onclick="navigate('followups.html')">Follow-ups</div>
    <div class="item" onclick="navigate('settings.html')">Settings</div>
    <div style="height:20px"></div>
    <div class="item" onclick="closeDrawer()">Close</div>
  </div>

  <div class="header">
    <button class="hamburger" onclick="openDrawer()">☰</button>
    <div class="logo"><img id="logoImg" src="logo-round.png" style="width:100%;height:100%;object-fit:cover"></div>
    <div class="brand"><div class="title" id="brandTitle">Vamika Estate</div><div class="sub" id="brandSub">Hiren Gohel • 7046869462</div></div>
    <button class="notify-btn" onclick="alert('Notifications need OneSignal setup')">Enable Notifications</button>
  </div>

  <div class="container">
    <div id="followupsList"></div>
    <div class="footer">Made for Vamika Estate • Add to Home Screen</div>
  </div>

<script src="common.js"></script>
<script>
function renderFollowups(){ const el=document.getElementById('followupsList'); el.innerHTML=''; const due=leads.filter(l=>l.follow); if(due.length===0){ el.innerHTML='<div class="card">No follow-ups</div>'; return; } due.forEach((l,i)=>{ const d=document.createElement('div'); d.className='card'; d.innerHTML='<div style="display:flex;justify-content:space-between;align-items:center"><div><b>'+escapeHtml(l.name)+'</b><div class="small">Follow: '+l.follow+'</div><div class="small">'+escapeHtml(l.req)+' • '+escapeHtml(l.loc)+'</div></div><div style="display:flex;gap:8px;flex-direction:column"><button class="btn" onclick="callLead('+i+')">Call</button><button class="btn-wa" onclick="openWhatsApp('+i+')">WhatsApp</button><button class="button-outline" onclick="extendFollow('+i+')">Extend</button></div></div>'; el.appendChild(d); }); }
function callLead(i){ const l=leads[i]; if(!l.phone){ alert('No phone'); return; } window.location.href='tel:'+l.phone; }
function openWhatsApp(i){ const l=leads[i]; window.open('https://wa.me/'+l.phone.replace(/\D/g,'')+'?text='+encodeURIComponent('Hello '+l.name),'_blank'); }
function extendFollow(i){ const d=prompt('Enter new follow-up (YYYY-MM-DDThh:mm)', leads[i].follow||''); if(d){ leads[i].follow=d; saveAll(); renderFollowups(); alert('Extended'); } }
function escapeHtml(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
document.addEventListener('DOMContentLoaded', ()=>{ renderHeader(); renderFollowups(); });
</script>
</body>
</html>
