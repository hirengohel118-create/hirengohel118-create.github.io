
<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Vamika Estate CRM</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="logo"><img id="logoImg" src="logo-round.png" style="width:100%;height:100%;object-fit:cover"></div>
      <div class="brand"><div class="title" id="brandTitle">Vamika Estate</div><div class="sub" id="brandSub">Hiren Gohel • 7046869462</div></div>
      <div class="controls"><button class="notify-btn" onclick="alert('Notifications need OneSignal setup')">Enable Notifications</button></div>
    </div>

    <div class="tabbar" role="tablist">
      <div class="tab active" id="tab-leads" onclick="switchTab('leads')">Leads</div>
      <div class="tab" id="tab-projects" onclick="switchTab('projects')">Projects</div>
      <div class="tab" id="tab-followups" onclick="switchTab('followups')">Follow-ups</div>
      <div class="tab" id="tab-settings" onclick="switchTab('settings')">Settings</div>
    </div>

    <div class="container">
      <!-- Leads Section -->
      <div class="section active" id="section-leads">
        <div class="search-row">
          <input id="searchBox" class="search" placeholder="Search leads...">
          <button class="add-btn" onclick="document.getElementById('leadForm').scrollIntoView({behavior:'smooth'})">+ New Lead</button>
        </div>

        <div id="leadForm" class="card">
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <input id="lead_name" class="input" placeholder="Name" style="flex:2;min-width:160px">
            <input id="lead_phone" class="input" placeholder="Phone" style="flex:1;min-width:140px">
            <select id="lead_propertyType" class="select" style="flex:1">
              <option>Flat</option><option>Bungalow</option><option>Plot</option><option>Office</option><option>Shop</option>
            </select>
            <select id="lead_bhk" class="select" style="width:120px">
              <option>1 BHK</option><option selected>2 BHK</option><option>3 BHK</option><option>4 BHK</option><option>5 BHK</option>
            </select>
            <input id="lead_location" class="input" placeholder="Location" style="flex:1;min-width:140px">
            <input id="lead_budget" class="input" placeholder="Budget" style="width:160px">
            <input id="lead_follow" class="input" type="datetime-local" style="width:220px">
            <textarea id="lead_notes" class="input" placeholder="Notes" style="flex-basis:100%"></textarea>
            <button class="btn btn-send" id="saveLeadBtn" style="width:200px">Save Lead</button>
          </div>
        </div>

        <div id="leadsList"></div>
      </div>

      <!-- Projects Section -->
      <div class="section" id="section-projects">
        <div class="card">
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <input id="proj_title" class="input" placeholder="Project Name" style="flex:2;min-width:160px">
            <input id="proj_loc" class="input" placeholder="Location" style="flex:1;min-width:140px">
            <select id="proj_config" class="select" style="width:160px"><option>2 BHK</option><option>3 BHK</option><option>4 BHK</option><option>5 BHK</option><option>6 BHK</option></select>
            <input id="proj_size" class="input" placeholder="Size" style="width:120px">
            <input id="proj_price" class="input" placeholder="Price" style="width:160px">
            <input id="proj_img" class="input" type="file" accept="image/*" style="width:220px">
            <textarea id="proj_desc" class="input" placeholder="Description" style="flex-basis:100%"></textarea>
            <button class="btn btn-send" id="saveProjectBtn" style="width:200px">Save Project</button>
          </div>
        </div>
        <div id="projectsList"></div>
      </div>

      <!-- Follow-ups Section -->
      <div class="section" id="section-followups">
        <div id="followupsList"></div>
      </div>

      <!-- Settings Section -->
      <div class="section" id="section-settings">
        <div class="card">
          <h3 style="margin:0 0 8px 0">Settings & Profile</h3>
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            <div style="flex:1;min-width:220px">
              <div class="small">Business name</div><input id="s_business" class="input" placeholder="Vamika Estate">
              <div class="small">Owner</div><input id="s_owner" class="input" placeholder="Hiren Gohel">
              <div class="small">Phone</div><input id="s_phone" class="input" placeholder="7046869462">
              <div class="small">Email</div><input id="s_email" class="input" placeholder="">
              <div class="small">Address</div><input id="s_address" class="input" placeholder="">
              <button class="btn" onclick="saveProfile()" style="margin-top:8px">Save Profile</button>
            </div>
            <div style="width:320px">
              <div class="small">Theme accent (HEX)</div><input id="accent_input" class="input" placeholder="#3B82F6">
              <div class="small" style="margin-top:8px">Upload logo</div><input id="logoUpload" class="input" type="file" accept="image/*">
              <div style="margin-top:8px;display:flex;gap:8px">
                <button class="btn" id="exportCSV">Export Leads (CSV)</button>
                <button class="btn" id="exportXLS">Export Leads (Excel)</button>
              </div>
              <div style="margin-top:12px"><div class="small">Total leads</div><div class="counter" id="lead_count">0</div><div class="small" style="margin-top:8px">Total projects</div><div class="counter" id="project_count">0</div></div>
              <div style="margin-top:12px"><div class="small">Backup / Restore</div><div style="display:flex;gap:8px;margin-top:8px"><button class="btn" onclick="exportLeadsCSV()">Download JSON Backup</button><input id="importBackup" class="input" type="file" accept="application/json" onchange="(function(e){ const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=function(ev){ try{ const obj=JSON.parse(ev.target.result); if(obj.leads) leads=obj.leads; if(obj.projects) projects=obj.projects; if(obj.profile) profile=obj.profile; saveAll(); renderLeads(); renderProjects(); alert('Backup restored'); }catch(err){ alert('Invalid file'); } }; r.readAsText(f); })(event)"></div></div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">Made for Vamika Estate • Add to Home Screen for app-like experience</div>
    </div>
  </div>

<script src="app.js"></script>
</body>
</html>
